# 你所了解的架构是什么？

> 应用架构、业务架构、技术架构

## 什么是架构？

架构在百度百科中的定义是：架构，又名软件架构，是有关软件整体结构与组件的抽象描述，用于指导大型软件系统各个方面的设计。

为什么要做架构设计？

卡内基·梅隆大学的玛丽·肖（Mary Shaw）和戴维·加兰（David Garlan）对软件架构做了很多研究，他们在 1994 年的一篇文章《软件架构介绍》（An Introduction to Software Architecture）中写到：

> “When systems are constructed from many components, the organization of the overall system-the software architecture-presents a new set of design problems.”
>
> 译：随着软件系统规模的增加，计算相关的算法和数据结构不再构成主要的设计问题；当系统由许多部分组成时，整个系统的组织，也就是所说的“软件架构”，导致了一系列新的设计问题。

这一系列新的问题诸如：

- 系统规模庞大，内部耦合严重，开发效率低；
- 系统耦合严重，牵一发动全身，后续修改和扩展困难；
- 系统逻辑复杂，容易出问题，出问题后很难排查和修复。

软件的发展历程其实就是一部与“复杂度”斗争的历史，架构的出现也不例外。简而言之，架构是为了应对软件系统复杂度而提出的一个解决方案，因此我们可以得出这样的结论：

架构设计的主要目的是为了解决软件系统复杂度带来的问题。



**软件架构的核心价值，即是控制系统的复杂性，将核心业务逻辑和技术细节的分离与解耦**。

软件架构是系统的草图，它描述的对象是直接构成系统的抽象组件；各个组件之间的连接则明确和相对细致地描述组件之间的通信。在实现阶段，这些抽象组件被细化为实际的组件，比如具体某个类或者对象。在面向对象领域中，组件之间的连接通常用接口来实现。

架构师的职责是努力训练自己的思维，用它去理解复杂的系统，通过合理的分解和抽象，理解并解析需求，创建有用的模型，确认、细化并扩展模型，管理架构；能够进行系统分解形成整体架构，能够正确的技术选型，能够制定技术规格说明并有效推动实施落地。

> 《软件架构设计》

## 架构分类

![image-20230301233200997](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202303012332076.png)

> 《业务架构·应用架构·数据架构实战》

公司高层设计出公司的战略，所产生的一系统需求，需要业务架构师来进行业务落地，而应用架构、技术架构是为支撑业务架构的落地而存在的。

环环相扣，上层驱动下层，下层支撑上层。

### 业务架构

在需求初期，业务的需求描述往往比较模糊，可能只是一句话。他们可能来自老板、运营或者用户。直接把这句话作为核心产品功能是不恰当的，合理的做法是先把这个产品所有的问题域列清楚。

业务架构就是讲清楚这些问题的处理过程，定义各个业务模块的相互关系，它从概念层面帮助我们理解系统面临哪些问题以及如何处理。

那业务架构师具体的职责是什么呢？

说到业务架构师啊，那就不得不提产品经理和开发工程师。产品经理的职责就是：告诉用户，系统长什么样子；告诉开发，他要实现什么功能。

比如说，我们现在要设计一个电商系统，用户想在我们系统上买东西，一个典型的购物流程，包括商品浏览、加入购物车、下单、支付。

![](https://technotes.oss-cn-shenzhen.aliyuncs.com/2021/images/20210722231720.png)

产品经理要做什么呢？首先要把每个步骤具体化为页面原型。在原型中，会直观的给出各个步骤的输入或输出，以及用户的操作过程，最后再把这些页面串起来，形成一个业务流程。

业务架构师要做什么呢？要设计一个购物流程模块，里面包含商品查询、添加购物车、下单和支付接口，来分别对应流程里的 4 个业务步骤。

要实现这个购物流程模块，其实是考验业务架构师的功力的。

首先，业务架构师要掌握不同模块的业务和数据模型。这会同时涉及商品、购物车、下单和支付四个业务，业务架构师要同时非常清楚这四部分的数据模型和业务逻辑。

其次，这个模块要足够灵活。如果一个业务领域的需求发生了变化，比如说，订单要增加一个新的状态，那么所有涉及该订单的模块都要知道这个变化，并要做出相应的调整。这也要求业务架构师对所有业务都了如指掌。

下面画出了电商系统的业务架构图：

![image-20230301234127792](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202303012341825.png)



### 应用架构

应用架构就是讲清楚系统内部是怎么组织的，有哪些应用，相互间是怎么调用的，它从逻辑层面帮助我们理解系统内部是如何分工与协作的。

![image-20230301234151587](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202303012341623.png)



### 技术架构

技术架构就是讲清楚系统由哪些硬件、操作系统和中间件组成，它们是如何和我们开发的应用一起配合，应对各种异常情况，保持系统的稳定可用。它从物理层面帮助我们理解系统是如何构造的，以及如何解决稳定性的问题。

> 举一个电商的例子。
>
> 比如一个商品业务，可能对应 3 个应用，一个前台商品展示应用、一个后台商品管理应用，以及一个商品基础服务。
>
> 业务架构定义了一个下单的具体流程；应用架构定义了下单有哪些应用参与以及它们如何协作；技术架构要保障相关的应用能够处理高并发，从而保证大促顺利进行。

> 举一个拍电影的例子。
>
> 业务架构定义了这个电影的故事情节和场景安排；应用架构定义了有哪些角色及其职责，在每个场景中，这些角色是如何互动的；技术架构确定这些角色由谁来表演，物理场景上是怎么布置的，以此保证整个拍摄能够顺利完成。

技术架构的挑战

- 硬件的问题

从技术架构的角度，提升硬件的处理能力一般有两种方式：Scale Up 和 Scale Out。

垂直扩展有物理上的瓶颈或成本的问题。受硬件的物理限制，机器的性能是有天花板的。水平扩展如何有效地管理大量的机器，硬件不是 100% 的可靠，它本身也会出问题。

我们在做技术架构设计时，就要充分考虑各种硬件故障的可能性，做好应对方案。比如说针对自然灾害，系统做异地多机房部署。

- 软件的问题

这里的软件，主要说的是各种中间件和系统级软件。软件在填硬件的各种坑的同时，也给系统挖了新的坑。

举个例子，Redis 集群的多节点，它解决了单节点处理能力问题，但同时也带来了新的问题，比如节点内部的网络有问题（即网络分区现象），集群的可用性就有问题；Redis 数据的多副本，它解决了单台服务器故障带来的可用性问题，但同时也带来了数据的一致性问题。

![image-20230301234215854](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202303012342895.png)
