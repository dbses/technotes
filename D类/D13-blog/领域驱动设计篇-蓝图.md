# 一、领域驱动设计与微服务

## 如何理解领域驱动设计？

拆开理解：首先是领域，再是设计。想要设计一个软件，但是由于业务太过复杂，设计过程难以进行。这时，使用领域的思想来辅助设计。

## 如果你是业务架构师，你在设计过程中会遇到哪些难题呢？

我想你面临的第一个问题就是，软件架构的选型，是使用单体架构，还是使用微服务架构？

如果你的业务不复杂，使用单体架构就可以满足了。既然业务不复杂，那也不需要用领域来驱动设计了。

所以我们谈领域驱动设计，一定是在业务复杂的前提下。既然业务复杂，所以你会选择微服务架构，为什么？因为微服务架构可以快速响应需求和业务的变化。

## 好！既然选择了微服务，那服务的粒度怎么确定呢？

有人说，微服务嘛，就是要微要小，拆得越小越好。（举反例）

xxx

## 到底应该怎么拆？

DDD 是一种处理高度复杂领域的设计思想，它通过边界划分将复杂业务领域简单化，帮我们设计出清晰的领域和应用边界，可以很容易地实现架构演进。

第一步，事件风暴，找出领域实体对象。

第二步，根据领域实体间的业务关联，将相关的实体组合形成聚合。它们属于同一个微服务。

第三步，根据语义边界，将多个聚合划定在一个限界上下文内，形成领域模型。这一层边界就是微服务的边界。



# 二、DDD 领域的思想

在研究和解决业务问题时，DDD 会按一定的规则将业务领域进行细分。举个例子：我们要研究桃树。

首先我们可以将桃树拆分为根、茎、叶，花、果、种子。

拆分后就是领域中的子领域，即子域。

## 子域

根、茎、叶，花、果、种子。再按照重要程度进行划分，分为核心域、通用域、支撑域。

这六个子域，哪个才是核心域呢？

园丁（花）、果农（果）。

对他们来说，茎、叶都是支撑域。

通用域是你需要用到的通用系统，比如认证、权限等等，这类应用很容易买到，没有企业特点限制，不需要做太多的定制化。而支撑域则具有企业特性，但不具有通用性，例如数据代码类的数据字典等系统。



















