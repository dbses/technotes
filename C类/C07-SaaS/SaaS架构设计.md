> 参考资料：[《互联网时代的软件革命·SaaS架构设计》](https://book.douban.com/subject/3290016/)

# 篇幅结构

第1篇 SaaS 商业模式

- 第1章 SaaS 的前世今生

第2篇 SaaS 应用架构

- 第2章 SaaS 成熟度模型
- 第3章 构建 Multi-Tenant 应用
- 第4章 高性能的 Multi-Tenant 最佳实践
- 第5章 Multi-Tenant 应用的可配置性
- 第6章 可伸缩的 SaaS 应用架构
- 第7章 SaaS 系统安全
- 第8章 离线应用

第3篇 SaaS 基础架构——云计算

- 第9章 分布式文件存储
- 第10章 分布式数据库
- 第11章 分布式 Cache
- 第12章 分布式计算

第4篇 开放的 SaaS 平台

- 第13章 不 Open API
- 第14章 开放的 SaaS 平台
- 第15章 结束语

# 第1章 SaaS 的前世今生

**什么是 SaaS**

从用户的角度看。在计算机诞生初期，计算机就是软件；

随着计算机应用水平的提高，软件就是一种产品；

随着软件产品功能越来越强大，软件已经成为企业工作中必不可少的产品，用户也需要投入更高的成本以保证软件运行环境的稳定；

一些软件开发商看到了商机，提出了一种新的软件应用模式 ASP（Application Service Provider），即应用服务提供商，软件运行所需的人力、物力均由提供商维持，而用户只需使用软件即可。

ASP 模式就是将软件统一托管到应用服务提供商的服务器中，这时，软件是一种被托管的应用。此时，从用户的角度看，用户更关心软件能提供什么服务。

ASP 维持了几年之后，就渐渐销声匿迹了。软件开发商在多年的反思和总结基础上喊出了新的口号：软件即服务--SaaS。

SaaS 将软件看作是一种服务，而不是一种产品。软件的用户是服务的需求者和消费者，而软件的提供者是服务的提供者和生产者。这样，将软件的商业模式从商品供需模式转换为服务供需模式，彻底颠覆了传统软件固有的经营模式。人类社会经过工业社会发展到信息社会，相应的经济活动也从以制造为中心转身以服务为中心，这是社会经济发展的大趋势。

SaaS 与 ASP 的不同点有哪些呢？

- 看问题的角度不同

  ASP 是站在软件开发商的角度来看问题的；SaaS 是站在用户的角度看问题的。

- 关注的目标不同

  ASP 关注的是如何方便用户更容易地使用软件，并降低软件维护成本；SaaS 关注的是软件是否能为用户提供有效的服务，而不是将重点放在提供服务的形式上。

- SaaS 与 ASP 的联系

  SaaS 软件继承了 ASP 的已有经验，并用新的“软件即服务”的理论指导，发展起来的新型软件商业模式。

**SaaS 软件的优势**

给用户的优势：

- 拿来即用：无须下载、安装、部署、配置。
- 无须维护：用户无须关心软件维护和升级问题。
- 按需使用：SaaS 软件是可按需使用的服务。
- 随处可用：用户能连上互联网就可以使用 SaaS。
- 风险减少：用户只需要支付一点费用就可以开始使用。
- 成本降低：无须自己维护软件。
- 先天防毒：SaaS 软件商都有专业的安全保障措施。

给软件商的优势：

- 节省销售成本
- 节省维护成本
- 稳健的经营模式

**SaaS 的缺点及解决办法**

- 依赖互联网
- 数据安全性
- 数据保密性

**SaaS 成功案例**

- Saleforce.com
- Google.com
- Alisoft.com
- Xtools
- SaaSBB
- 伟库网
- 友商网



# 第2章 SaaS 成熟度模型

**SaaS 的规模效应** 

**SaaS 成熟度模型分级**

|        | 可配置 | 高性能 | 可伸缩 |
| ------ | ------ | ------ | ------ |
| Level1 | x      | x      | x      |
| Level2 | v      | x      | x      |
| Level3 | v      | v      | x      |
| Level4 | v      | v      | v      |

Level1：定制开发

Level2：可配置

Level3：高性能的多租户架构

Level4：可伸缩性的多租户架构

**如何选择合适的 SaaS 成熟度模型**

需要考虑的因素有：

- 产品所面向的客户群的特征与需求
- 产品的租户数量级别
- 团队的开发能力与愿意付出的开发/改造成本

**SaaS 软件的成熟度模型的渐进步骤**

可按照如下的步骤来逐步增加成熟度：

- 实现多租户架构
- 实现多租户架构下的高性能
- 实现可配置
- 实现伸缩性

# 第3章 构建 Multi-Tenant 应用

**第一阶段：做项目**

- 场景视图

  作为老板，我希望了解客户的增长和流失数量以及趋势；

  作为员工，我希望保留我的客户资料随时查阅，并且通过邮件、IM、IP 电话快速与客户交谈；

  作为员工，我希望以日历的方式提醒我当天和未来的商务行程；

- 逻辑视图

  模块划分与依赖关系：客户模块、行程模块、订单模块、报表模块。

- 开发视图

  开发环境、技术框架、分层策略、目录结构。

- 过程视图

  当前的系统暂无并发或同步等问题，所以将过程视图忽略。

- 物理视图

  系统部署时将 Web 服务器、应用服务器和 DB 服务器分离，以保证业务繁忙时快速的响应性能。

**第二阶段：做产品**

梅超风公司有自己的业务员，她希望业务员之间的客户资料保密，业务 员只看到自己的客户。

可配置化：

- MDA 模型驱动架构
- MDA 四层模型

**第三阶段：多租户**

多租户数据隔离级别：

- 独立数据库
- 共享数据库，隔离数据架构
- 共享数据库，共享数据架构

SaaS 多租户设计：

- 租户管理
- 数据隔离

# 第4章 高性能的 Multi-Tenant 最佳实践

**数据库层性能优化**

- 建立合适的索引
- 消除大数据表连接
- 避免复杂 SQL

**应用层性能优化**

- Cache
- 异步操作

**Web 层性能优化**

分析并找出了以下几个原因：

- 页面过大
- 图片过多
- iframe 过多
- Cookie 过大

**优化的效果**

即使在已经达到 1000 个用户的情况下，应用服务器和数据库服务器负载都稳定在 20% 左右，，对支撑 2000 个用户的目标应该是没有什么大问题了。

# 第5章 Multi-Tenant 应用的可配置性

**数据可配置**

- 定制字段
- 预分配字段
- 名称值对

**功能可配置**

- 原子功能划分

**界面可配置**



**流程可配置**



**配置元数据管理 **



**可配置系统运行**





SaaS

SaaS

SaaS

SaaS

SaaS

SaaS

SaaS

SaaS