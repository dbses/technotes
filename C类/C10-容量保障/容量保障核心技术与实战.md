# 开篇词 | 互联网时代，人人肩负容量保障的职责

在我的职业生涯中，能够非常深刻地感受到，容量保障对于一家互联网公司的重要性，因为几乎每时每刻我都在回答这些问题：

- 我负责的软件系统目前运行的很好，但是公司业务增长迅猛，如果访问量增加 2 倍，系统还能支撑吗？
- 如果无法支撑 2 倍的访问量，哪些服务会首先成为瓶颈？
- 这些服务如果采取扩容措施，需要扩容多少量？
- 大规模促销活动场景下，容量风险如何识别和预防？

我在多个场合进行容量保障分享时，也经常被问及这样的问题：

- 我们一直在做性能测试，为啥服务容量还是老出问题？
- 容量保障，有没有套路可循？
- 我们公司规模不大，没有专人去做容量保障，有没有成本低点的办法？
- 我公司规模不大，业务也没有什么大促场景，需要做容量保障吗？

**到底什么是容量保障?**

容量保障，就是用各种方法保证软件系统的容量充足，预防容量隐患的重要工作。

容量保障对于系统稳定性至关重要，如果一辆货车核载 80 吨，而我们塞进了 100 吨的货物，后果可想而知。

**容量保障难不难？**

互联网场景下的容量保障工作是一项系统性工程，它的难点主要体现在以下几个方面。

1. 容量的不确定性：一辆货车在交付时已经标注了核载重量，而互联网服务的容量受服务器资源、架构设计、网络传输状况和业务场景等多种条件制约，会呈现出不同的容量表现，很难得到确定解。
2. 容量评估的复杂性：随着微服务架构的日益盛行，服务链路变得越来越复杂，任何一个环节出现容量瓶颈都有可能放大到整条链路，这给容量评估工作带来了难度。
3. 容量测试的不准确性：容量测试的场景需要尽可能逼近真实情况，还需要保证被测服务的环境（服务资源、规模、配置等）与真实环境对等，但实际上受制于各种原因，我们很难做到完全仿真，因此容量测量的准确性也是一个挑战。
4. 此外，容量保障还会牵扯到成本管理的问题，这也是一个难点。

说了那么多难点，那么如何将它们变得不难呢？这就是我的这个专栏希望带给你的价值。

**课程是如何设计的?**

在这次的专栏中，我将从技术视角出发构建一个容量保障体系化的大图，覆盖容量保障工作的方方面面，逐个击破，尽可能全面地展现容量保障各项技术的全貌。具体来说，会有以下三个部分。

基础篇：我将以容量保障工作的时间轴为主线，分别就目标、测量、分析、治理这几大工作展开，积累容量保障的通用方法，帮助你完成基础入门。

进阶篇：我将分几个独立专项话题，对容量保障工作中的一些前沿技术进行深入剖析，包括全链路压测、分布式压测平台的研发工作，以及 AI 预测容量、云原生下的容量保障新趋势等。这其中部分话题在业界甚至是第一次公开，非常值得学习。

案例篇：从案例场景出发，介绍双 11 大促场景下的容量保障工作如何做好，及小公司如何建立容量保障体系，并对容量保障组织建设给出我的建议。

在这里，我先为你总结一套较为适合互联网场景的容量保障方法论，如下图所示。

![image-20241104231431875](https://technotes.oss-cn-shenzhen.aliyuncs.com/2024/202411042314907.png)

先从“日常容量”和“大促容量”的目标出发，拆分出三个入口：

- 计划事件：事先能够预知的新功能或大促活动
- 突发事件：事先无法预知的紧急事件
- 日常事件：常态化的容量表现

再自上而下拆解出具体的策略（工作项、工具、规范、案例等），每一项策略再做具体细分，形成一个有机的整体。

当然，这套方法论未必适合所有的场景和业务形态，但我认为，即便是在一个全新的领域，它也可以帮助你在最短的时间内，建立一套有效的容量保障体系。更重要的是，它提供了一种核心的思维方式。



