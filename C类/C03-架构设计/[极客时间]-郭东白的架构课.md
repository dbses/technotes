> 来源极客时间《郭东白的架构课》

# 开篇词｜没有战略意图，就成不了一个顶尖的架构师

该怎么培养自己作为架构师的战略意图呢？

我先要给你一个我的答案：靠记忆和技能学习，是成不了一个好架构师的。真正的架构师成长，主要靠思考力的提升。

第一，使用演绎法来寻找架构原理，而不是归纳法。

第二，我会穿插一些基本的架构方法、思维工具和建模技能，来帮助你提升架构素养。

第三，课程中会有大量案例，都是根据我的真实经历加工而成的。

**我会怎么帮你设计战略意图？**

模块一：六大生存法则

![image-20230320225814632](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202303202258672.png)

模块二：价值创造

我把架构活动分成八个节点：环境搭建、目标确认、可行性探索、架构规划、项目启动、阶段交付、全面上线和复盘。

模块三：职业规划与成长

我把架构师的成长分解成五种能力，分别是：单个模块的设计能力、解决横向问题的能力、解决跨领域冲突的能力、全局性技术决策的能力，以及通过技术带来生存优势的能力。

模块四：思考力

我想强调的是：架构师没有速成班，架构师的成功主要靠思考力的提升。

# <mark>模块一：六大生存法则</mark>

# 01｜模块导学：是什么在影响架构活动的成败？

这节课是我们模块一的导入部分，我会先来介绍模块的主要内容，以及为什么我要讲生存法则这个话题。

一名软件架构师要为相对复杂的业务制定，并且引导实施一个结构化的软件方案。这个发现最终方案和推动实施的过程，就是架构活动。

**影响架构活动成败的要素有哪些？**

在整个软件架构的活动过程中，我们作为一个架构师，首先要做的就是确定架构设计方案。

这个方案需要和企业目标一致，与商业、软件环境相匹配，并且还需要满足各种资源的约束条件。而你作为一个架构师，要在这些方案中找到那个能够最小化资源和成本，最大化商业价值，以及最大化目标用户满意度的方案。最终，你还要组织技术团队交付这个架构设计方案。

如图所示，展示了架构师的全部活动，按照颜色分类，主要包括三个部分。

![image-20230530220824763](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202305302208805.png)

中间白色部分是架构师的决策领域，包括架构方案和架构活动。

白色区域以外的部分，架构师也不具备决策权，仅仅可以关注、影响和干预这些因素。

黄色部分指架构师的输入和输出部分。

蓝色部分指架构师的工作环境，主要包括企业所处的商业环境，如竞争、市场、监管等；企业内部的技术环境，如交互设备、sensor 网络、计算环境、外部的数据源等；以及企业和团队的文化环境。环境在很大程度上会影响架构方案的选择和实施路径，但同时也是大部分架构师最容易忽略的考量因素。

当我们把架构师的活动归纳总结后，很容易就能清楚到底是什么在影响整个架构活动的成败。我将它们总结归纳为六个要素，分别是：目标、资源、行为、天时、地利以及人和。

第一个要素是<mark>目标</mark>。因此我们生存法则的第一条，就是教你如何去理解和干预这个目标，确保最终的架构活动能够为你所在的团队或企业带来价值。否则目标错了，你的项目永远也没办法成功。

第二是<mark>资源</mark>。我们所有的活动都要消耗资源且最终要创造价值，就是图中标记为 3 的部分，架构活动当然也不例外。在大多数企业里，甚至包括非盈利型组织，都需要关注有限资源的利用率，以及架构活动最终可以带来的商业回报。

第三是<mark>行为</mark>，是关于你应该如何通过架构活动来最大化你所贡献的商业价值的。否则资源不足或者是消耗太快，你的项目也同样无法成功。

做成一件事情，如果周边条件成熟，环境好，那么事情就会进行得很顺利。反过来，如果条件不成熟，或者你逆势而为，那就会很艰难。架构活动也一样，影响它成败的要素也有天时、地利和人和。

先说<mark>天时</mark>，这里指的是商业环境和技术环境的变化趋势。环境复杂多变，那么看清楚变化趋势的本质，就可以让我们的架构决策顺势而为，借助于环境的变化来成就我们的团队、企业。这正是我们第四个生存法则要覆盖的内容。

再讲<mark>地利</mark>，就是你作为一个架构师待的地方，你所在企业的文化环境，这是我们作为架构师无法改变的部分。虽然没法改变，但“良禽择木而栖”。那么第六条法则就会帮助你选择最有利于架构师职业发展的文化环境，最大化你的成长。

最后讲<mark>人和</mark>，在上图中标注为 2，架构活动中涉及的人主要是研发人员和目标用户。在输入端，架构师需要与多个研发团队协作，因而理解研发方的核心诉求就尤为关键。在输出端，架构师产出方案的最终评判即目标用户的长期满意度。因此深度洞察用户的人性就是保证架构活动成功的关键所在。这是我们第二个生存法则要覆盖的内容。

**如何利用生存法则，最大化架构师的成长？**

简单来说，生存法则指的是我们作为架构师在设计架构方案和组织架构活动时必须要尊重的一些原则。如果违背这些原则，那么作为一个架构师的生存就会受到威胁。

我先简单陈述一下这六个法则的核心内容，然后再讲你应该怎么学习和应用这些法则。

第一条，架构师必须保障整个架构活动<mark>有且仅有一个正确的目标</mark>。这是架构活动的起点，也是甄别架构方案的主要依据，所以架构师有义务影响和干预这个目标，以确保目标本身的正确性。

第二条，架构活动需要<mark>尊重和顺应人性</mark>。架构活动既要服务用户，也要组织研发人员协同工作。这就意味着架构师必须洞察研发人员和目标用户的人性。从人性角度出发来做决策，才能保障最终面向用户的方案具有长期正确性，以及面向研发同学的实施过程具有可行性。

第三，架构师永远需要<mark>在有限资源下最大化商业价值</mark>。对于任何一个架构活动来说，架构师的可用资源，包括商业成本、研发成本、时间成本、迁移成本等，都是极其有限的，所以架构活动必须在这些限制条件下，最大化商业价值。

第四，架构选型必须要考虑到所依赖<mark>技术模块的生命周期</mark>。在架构设计的过程中，架构师会有一个技术选择空间。那么在这个选择空间内，理解、顺应且利用好技术周期就至关重要。也就是说，架构师要看准技术趋势，一般情况下，要选择已经有规模优势或者是即将有规模优势的技术，而不是选择那些接近衰老期的技术。

第五，架构师需要在架构活动中不断干预活动的目标和内容，以同时保证整个架构活动可以<mark>为企业注入外部适应性</mark>。这是架构师个人能在架构活动中创造的核心价值，而且也是架构师职业成长的必须，甚至也是架构师的荣耀所依赖。最终正确的架构选型会因为有很强的外部适应性而长期存在。

第六，架构师需要<mark>在一个相对安全的文化环境中探索未知==, 只有这样，才有希望找到正确的架构方案。文化环境是架构师最难影响的，因而架构师要有足够的判断力，认清自己所在的文化环境是否有利于探索正确的架构方案，不要在一个错误的环境中浪费自己的宝贵生命。

# 02｜法则一：为什么有些架构活动会没有正确的目标？

所有的架构规划必须有且只有一个正确的目标，而且它必须与公司的战略意图相匹配，这是你架构设计的起点。否则，系统就会变得复杂和无序，缺少结构性。

**架构活动为什么需要目标？**

从我过去二十多年的架构经验来看，一半以上的架构活动在发起之前都没有明确的目标。这种架构活动执行到最后，多个协同模块之间必然是一个散乱的结构，如下图所示。

![](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202305302302745.png)

如果在初期就有一个明确的目标，那么做到最后，子模块和初期目标就会是大致对齐的，同时也会最大化对目标的贡献。

目标缺失是由多种原因造成的，刚才我们讲的情形只是其中一种表现。接下来，我就来讲讲目标缺失具体有哪些根因。下节课，再来提供你作为一个架构师的具体应对思路。

**目标缺失的两大根因**

关于目标缺失的根因，我们可以从技术和业务两个维度来寻找。

- 技术上：目标缺少全局视角

我曾在一个不到 700 人的研发团队里，看到过 8 个自动化 BI 报表工具、5 套 UI 组件、十多套工作流引擎。对于日常运维、软件升级、安全、合规和审计而言，这简直就是灾难。我相信在这些技术设计之初，从开发同学的视角来看，或多或少都有一些技术先进性的理由。但同时我也可以断定，引入这些技术时很少有人思考过全局复杂性。这就导致整个企业的软件从一个同构的系统迅速衰变成一个混乱无章的大杂烩。

引入这些技术的背后，其实还有一个不太光彩的原因，那就是开发者的个人利益。开发者的个人喜好、技术能力，甚至与其他开发者的关系，也会影响到自己是否会引入一个新系统。

在技术层面上，还有另外一个常见的原因，就是信息沟通不畅。因为层级低的技术同学很少做跨团队跨部门沟通，一些小范围的架构改造也找不到一个官方版本可以借用，而且从头开始的时候，总觉得别人的设计太复杂，有过度设计的嫌疑，所以都是自己去新写一个版本。而一旦业务逐渐增长，小工具长成了大工具，就变成了一个新的变种。

总结来说，从技术维度去思考目标缺失的根因，就在于缺少全局视角，主要有三方面的表现：技术同学对于先进技术的强烈好奇心，开发者的个人利益，以及信息沟通不畅。

- 业务上：目标太多、不明确

比如业务 leader 有一个极具创意的方案，但业务压力大，市场调研的准确度也很难判断，所以多数时间需要靠 A/B 测试来决定这个方案是否要推广。可以看到，业务同学连需求之间的一致性和相容性都没搞清楚，就把需求一个接一个地转给技术同学。在这种大量 A/B测试的背景下，业务逻辑层层累积，系统变得越来越臃肿，老代码谁都不敢删。

还有一种情形不太常见，但却极端致命，值得我们重视。那就是一个公司有两个明确的目标，这有点像华山派的剑宗和气宗之争。

举个例子，在一个做电商的公司中，剑宗会认为做业务要像自营一样对整个供应链做强管控，这样会有更好的用户体验，以获取更多的市场份额；气宗则认为道法自然，做业务就要走开放的平台模式，最大化平台的丰富度，由用户选择来淘汰落后的商家。

事实上这种情形根本没有技术解。如果一个公司在战略上不断摇摆，就表明这家公司干脆没有战略意图，那么我更建议你另谋高就。

**思考题**

1、由于业务压力，我们经常会面临各种各样的重点项目。那么，你是怎么判断一个项目的重要性呢？怎么决定自己思考力的分配呢？注意，这里指的不是你被上级领导分配的写代码的时间，而是你发自内心觉得某件事情很重要，你主动花大量功夫去思考的过程。也就是说，你自主决策的个人注意力分配的算法是什么？

2、你或者你周围人是否曾建造过一个非常精巧的轮子，但是随着时间的推移，变成了诸多要被清理的破轮子？当时发明者有没有意识到这个轮子会增加系统的复杂性呢？为什么？

3、在你参与过的架构活动中，最让你感到兴奋的一个目标是什么呢？为什么？





# 07｜法则三：架构师如何找到自己的商业模式？

今天我们要讲的是架构师的第三个生存法则：作为一个架构师，必须要在有限的资源下最大化架构活动所带来的商业价值。对于任何一个架构活动而言，架构师的可用资源，包括商业成本、研发成本、时间成本、迁移成本等等，都是非常有限的。但架构活动就是要在这些限制条件之下，将商业价值最大化。

**什么是商业价值？**

商业价值 (Business value) 呢，就是从现金收入的视角看价值创造的过程。你每天忙碌的工作，从企业的收入上来说，可以为公司带来什么样的短期和长期现金和其他收入，那么对这部分收入的量化，就是你创造的商业价值。简单来说，商业价值就是帮助公司获取商业收入。

我会把第三条生存法则分为五个部分来讲：

1. 理解你所在的企业或团队的商业模式；
2. 理解你在自己所处环境中创造的商业价值；
3. 保障架构活动的长期商业价值；
3.  在架构规划中寻找扩大收入的机会；
3. 在架构规划中寻找减少成本的机会。

**理解一个企业或团队的商业模式**

比如说天猫这个电商平台，它的主要收入来自于交易抽成：

```
总收入 = GMV * Commission
```

网站的交易额越大，抽成就越多。网站规模越大，总收入就越多。

但到了不同的细分领域，每个领域的商业模式，就会分解成不一样公式了。比如说你负责天猫平台的一个由算法驱动的购物频道，那么你们的商业模式可能是这样的：

```
GMV= 流量 * 转化率 * 平均订单金额
```

如果你负责天猫平台某个垂直行业的招商团队，那么你们的商业模式可能是这样：

```
GMV= 日均动销店铺数 * 店铺日均销售额
```

如果你负责某个垂直行业的大商户运营团队，那么你们的商业模式可能是这样：

```
GMV= 活动参与次数 * 平均计划销售额 * 计划达成率
```

如果你负责商品团队，那么你们的商业模式可能是这样的：

```
GMV= 动销商品数 * 订单数 * 每订单件数 * 件单价
```

**理解自己所处的工作环境**

一个以客户为导向的团队，他们的首要目的不是听从上司的声音，而是去倾听客户的声音，从客户的需求中寻找自己能够创造商业价值的地方。所以这样的团队，绝不会靠公司的拨款过日子，他们的收入必须源自为客户创造的真实的商业价值。

这就是为什么越是受公司大力赞助的项目就越难存活的道理。

如果你活在一个靠公司拨款而生存的部门，那么你学习到的能力是有限的，因为你们部门从上到下都不是在求生，也不是为客户创造价值，所以你也学不到真正的生存技能。

==我们每个人都要有自己的商业模式。==你必须在工作环境中找到创造价值的方式，这样才能保障自己一直被需要，也能保障未来的收入。

这里面有两个关键元素。第一是增量价值，就是你通过工作所创造的价值，是在社会提供的平均价值之上的。

举个例子。2010 年之前，如果你是一个做微服务框架的高手，那你的增量价值就非常大，一个人能顶十个甚至一百个研发。因为那时候开源的微服务框架还不够成熟。但到了今天，如果你还是单兵作战，擅长写微服务框架，那跟开源的 Spring Framework 相比，你提供的增量价值可能就是一个负数了。因为团队剩下的同学还要花时间来学习、使用和维护你写的框架，公司也要为这些同学付出工资成本。

虽然你的工作没有变，但社会提供的开源解决方案的价值增加了，那你的增量价值相应地就会减少，甚至不存在。

第二个是可度量性。把自己的工作放到我们刚才讲的公式里去。假设你是做商品相关的技术，那么：

```
GMV= 动销商品数 * 订单数 * 每订单件数 * 件单价
```

你需要度量的是，你的工作对公式中的某一项或某几项会起到什么促进作用。

# 08｜法则三：架构师如何在一定时间内最大化自己的增量价值？



























