> 来源极客时间《郭东白的架构课》

# 开篇词｜没有战略意图，就成不了一个顶尖的架构师

该怎么培养自己作为架构师的战略意图呢？

我先要给你一个我的答案：靠记忆和技能学习，是成不了一个好架构师的。真正的架构师成长，主要靠思考力的提升。

第一，使用演绎法来寻找架构原理，而不是归纳法。

第二，我会穿插一些基本的架构方法、思维工具和建模技能，来帮助你提升架构素养。

第三，课程中会有大量案例，都是根据我的真实经历加工而成的。

**我会怎么帮你设计战略意图？**

模块一：六大生存法则

![image-20230320225814632](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202303202258672.png)

模块二：价值创造

我把架构活动分成八个节点：环境搭建、目标确认、可行性探索、架构规划、项目启动、阶段交付、全面上线和复盘。

模块三：职业规划与成长

我把架构师的成长分解成五种能力，分别是：单个模块的设计能力、解决横向问题的能力、解决跨领域冲突的能力、全局性技术决策的能力，以及通过技术带来生存优势的能力。

模块四：思考力

我想强调的是：架构师没有速成班，架构师的成功主要靠思考力的提升。

# <mark>模块一：六大生存法则</mark>

# 01｜模块导学：是什么在影响架构活动的成败？

这节课是我们模块一的导入部分，我会先来介绍模块的主要内容，以及为什么我要讲生存法则这个话题。

一名软件架构师要为相对复杂的业务制定，并且引导实施一个结构化的软件方案。这个发现最终方案和推动实施的过程，就是架构活动。

**影响架构活动成败的要素有哪些？**

在整个软件架构的活动过程中，我们作为一个架构师，首先要做的就是确定架构设计方案。

这个方案需要和企业目标一致，与商业、软件环境相匹配，并且还需要满足各种资源的约束条件。而你作为一个架构师，要在这些方案中找到那个能够最小化资源和成本，最大化商业价值，以及最大化目标用户满意度的方案。最终，你还要组织技术团队交付这个架构设计方案。

如图所示，展示了架构师的全部活动，按照颜色分类，主要包括三个部分。

![image-20230530220824763](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202305302208805.png)

中间白色部分是架构师的决策领域，包括架构方案和架构活动。

白色区域以外的部分，架构师也不具备决策权，仅仅可以关注、影响和干预这些因素。

黄色部分指架构师的输入和输出部分。

蓝色部分指架构师的工作环境，主要包括企业所处的商业环境，如竞争、市场、监管等；企业内部的技术环境，如交互设备、sensor 网络、计算环境、外部的数据源等；以及企业和团队的文化环境。环境在很大程度上会影响架构方案的选择和实施路径，但同时也是大部分架构师最容易忽略的考量因素。

当我们把架构师的活动归纳总结后，很容易就能清楚到底是什么在影响整个架构活动的成败。我将它们总结归纳为六个要素，分别是：目标、资源、行为、天时、地利以及人和。

第一个要素是<mark>目标</mark>。因此我们生存法则的第一条，就是教你如何去理解和干预这个目标，确保最终的架构活动能够为你所在的团队或企业带来价值。否则目标错了，你的项目永远也没办法成功。

第二是<mark>资源</mark>。我们所有的活动都要消耗资源且最终要创造价值，就是图中标记为 3 的部分，架构活动当然也不例外。在大多数企业里，甚至包括非盈利型组织，都需要关注有限资源的利用率，以及架构活动最终可以带来的商业回报。

第三是<mark>行为</mark>，是关于你应该如何通过架构活动来最大化你所贡献的商业价值的。否则资源不足或者是消耗太快，你的项目也同样无法成功。

做成一件事情，如果周边条件成熟，环境好，那么事情就会进行得很顺利。反过来，如果条件不成熟，或者你逆势而为，那就会很艰难。架构活动也一样，影响它成败的要素也有天时、地利和人和。

先说<mark>天时</mark>，这里指的是商业环境和技术环境的变化趋势。环境复杂多变，那么看清楚变化趋势的本质，就可以让我们的架构决策顺势而为，借助于环境的变化来成就我们的团队、企业。这正是我们第四个生存法则要覆盖的内容。

再讲<mark>地利</mark>，就是你作为一个架构师待的地方，你所在企业的文化环境，这是我们作为架构师无法改变的部分。虽然没法改变，但“良禽择木而栖”。那么第六条法则就会帮助你选择最有利于架构师职业发展的文化环境，最大化你的成长。

最后讲<mark>人和</mark>，在上图中标注为 2，架构活动中涉及的人主要是研发人员和目标用户。在输入端，架构师需要与多个研发团队协作，因而理解研发方的核心诉求就尤为关键。在输出端，架构师产出方案的最终评判即目标用户的长期满意度。因此深度洞察用户的人性就是保证架构活动成功的关键所在。这是我们第二个生存法则要覆盖的内容。

**如何利用生存法则，最大化架构师的成长？**

简单来说，生存法则指的是我们作为架构师在设计架构方案和组织架构活动时必须要尊重的一些原则。如果违背这些原则，那么作为一个架构师的生存就会受到威胁。

我先简单陈述一下这六个法则的核心内容，然后再讲你应该怎么学习和应用这些法则。

第一条，架构师必须保障整个架构活动<mark>有且仅有一个正确的目标</mark>。这是架构活动的起点，也是甄别架构方案的主要依据，所以架构师有义务影响和干预这个目标，以确保目标本身的正确性。

第二条，架构活动需要<mark>尊重和顺应人性</mark>。架构活动既要服务用户，也要组织研发人员协同工作。这就意味着架构师必须洞察研发人员和目标用户的人性。从人性角度出发来做决策，才能保障最终面向用户的方案具有长期正确性，以及面向研发同学的实施过程具有可行性。

第三，架构师永远需要<mark>在有限资源下最大化商业价值</mark>。对于任何一个架构活动来说，架构师的可用资源，包括商业成本、研发成本、时间成本、迁移成本等，都是极其有限的，所以架构活动必须在这些限制条件下，最大化商业价值。

第四，架构选型必须要考虑到所依赖<mark>技术模块的生命周期</mark>。在架构设计的过程中，架构师会有一个技术选择空间。那么在这个选择空间内，理解、顺应且利用好技术周期就至关重要。也就是说，架构师要看准技术趋势，一般情况下，要选择已经有规模优势或者是即将有规模优势的技术，而不是选择那些接近衰老期的技术。

第五，架构师需要在架构活动中不断干预活动的目标和内容，以同时保证整个架构活动可以<mark>为企业注入外部适应性</mark>。这是架构师个人能在架构活动中创造的核心价值，而且也是架构师职业成长的必须，甚至也是架构师的荣耀所依赖。最终正确的架构选型会因为有很强的外部适应性而长期存在。

第六，架构师需要<mark>在一个相对安全的文化环境中探索未知</mark>, 只有这样，才有希望找到正确的架构方案。文化环境是架构师最难影响的，因而架构师要有足够的判断力，认清自己所在的文化环境是否有利于探索正确的架构方案，不要在一个错误的环境中浪费自己的宝贵生命。

# 02｜法则一：为什么有些架构活动会没有正确的目标？

所有的架构规划必须有且只有一个正确的目标，而且它必须与公司的战略意图相匹配，这是你架构设计的起点。否则，系统就会变得复杂和无序，缺少结构性。

**架构活动为什么需要目标？**

从我过去二十多年的架构经验来看，一半以上的架构活动在发起之前都没有明确的目标。这种架构活动执行到最后，多个协同模块之间必然是一个散乱的结构，如下图所示。

![](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202305302302745.png)

如果在初期就有一个明确的目标，那么做到最后，子模块和初期目标就会是大致对齐的，同时也会最大化对目标的贡献。

目标缺失是由多种原因造成的，刚才我们讲的情形只是其中一种表现。接下来，我就来讲讲目标缺失具体有哪些根因。下节课，再来提供你作为一个架构师的具体应对思路。

**目标缺失的两大根因**

关于目标缺失的根因，我们可以从技术和业务两个维度来寻找。

- 技术上：目标缺少全局视角

我曾在一个不到 700 人的研发团队里，看到过 8 个自动化 BI 报表工具、5 套 UI 组件、十多套工作流引擎。对于日常运维、软件升级、安全、合规和审计而言，这简直就是灾难。我相信在这些技术设计之初，从开发同学的视角来看，或多或少都有一些技术先进性的理由。但同时我也可以断定，引入这些技术时很少有人思考过全局复杂性。这就导致整个企业的软件从一个同构的系统迅速衰变成一个混乱无章的大杂烩。

引入这些技术的背后，其实还有一个不太光彩的原因，那就是开发者的个人利益。开发者的个人喜好、技术能力，甚至与其他开发者的关系，也会影响到自己是否会引入一个新系统。

在技术层面上，还有另外一个常见的原因，就是信息沟通不畅。因为层级低的技术同学很少做跨团队跨部门沟通，一些小范围的架构改造也找不到一个官方版本可以借用，而且从头开始的时候，总觉得别人的设计太复杂，有过度设计的嫌疑，所以都是自己去新写一个版本。而一旦业务逐渐增长，小工具长成了大工具，就变成了一个新的变种。

总结来说，从技术维度去思考目标缺失的根因，就在于缺少全局视角，主要有三方面的表现：技术同学对于先进技术的强烈好奇心，开发者的个人利益，以及信息沟通不畅。

- 业务上：目标太多、不明确

比如业务 leader 有一个极具创意的方案，但业务压力大，市场调研的准确度也很难判断，所以多数时间需要靠 A/B 测试来决定这个方案是否要推广。可以看到，业务同学连需求之间的一致性和相容性都没搞清楚，就把需求一个接一个地转给技术同学。在这种大量 A/B测试的背景下，业务逻辑层层累积，系统变得越来越臃肿，老代码谁都不敢删。

还有一种情形不太常见，但却极端致命，值得我们重视。那就是一个公司有两个明确的目标，这有点像华山派的剑宗和气宗之争。

举个例子，在一个做电商的公司中，剑宗会认为做业务要像自营一样对整个供应链做强管控，这样会有更好的用户体验，以获取更多的市场份额；气宗则认为道法自然，做业务就要走开放的平台模式，最大化平台的丰富度，由用户选择来淘汰落后的商家。

事实上这种情形根本没有技术解。如果一个公司在战略上不断摇摆，就表明这家公司干脆没有战略意图，那么我更建议你另谋高就。

**思考题**

1、由于业务压力，我们经常会面临各种各样的重点项目。那么，你是怎么判断一个项目的重要性呢？怎么决定自己思考力的分配呢？注意，这里指的不是你被上级领导分配的写代码的时间，而是你发自内心觉得某件事情很重要，你主动花大量功夫去思考的过程。也就是说，你自主决策的个人注意力分配的算法是什么？

2、你或者你周围人是否曾建造过一个非常精巧的轮子，但是随着时间的推移，变成了诸多要被清理的破轮子？当时发明者有没有意识到这个轮子会增加系统的复杂性呢？为什么？

3、在你参与过的架构活动中，最让你感到兴奋的一个目标是什么呢？为什么？

# 03｜法则一：如何找到唯一且正确的架构目标？

这节课，我们就来聊聊该如何寻找正确的架构目标，以及如果目标制定错误，该如何挽回。

**如何寻找正确的架构目标？**

主要分为三种情况，我们来分别讨论。

<mark>第一种情况：确认一个正确目标，且要试图逼近它。</mark>

在做架构设计之前，我永远都会问自己这样一个问题：这个架构规划为什么可以给企业带来生存优势？

对这个问题的回答，其实渗透了你对几个价值创造维度的理解，包括：促进企业规模化；加速企业模式探索；提高企业效率；提升用户体验的理解。

显然，未来充满不确定性，终极目标很难验证，但通过反复问自己这个问题，我们就可以不断逼近这个唯一且正确的架构目标。

那么你作为一个架构师，怎么判断一个目标是不是正确的呢？我的建议如下：

1. 首先，要用企业的战略意图去鉴定架构活动目标的正确性。
2. 接着，如果目标与战略意图不匹配，那么你要试图影响甚至是改变这个目标。你可以与架构项目的发起人反复沟通，陈述你的理由，建议他去寻找另一个更接近战略意图的目标。
3. 如果目标与战略意图匹配，那你要看看是否存在一个更合理的目标，可以让企业能够更快地逼近战略意图。

如果你能保持这么做，哪怕你不知道终极目标，但是你已经在不断逼近了。

<mark>第二种情况：关于技术驱动的目标</mark>

技术人员往往缺少全局视角。在这种情形下，你可以通过引导的方式，帮他找到一个更好的方案，让他从战略角度去思考一个架构方案对公司的终极价值。 最终，找到能够最大化公司长期价值，并且成本合理可控的方案。

就拿上节课讲的在公司引入新技术方案的情形来说。在公司引入新技术，我们也提到了虽然这么做有个人利益驱动的缘由，不过绝大多数研发人员还是有着非常积极正面的出发点的。所以在处理这些方案时，你首先做的不是全盘否定，而是站在他的视角，看到、并理解他的出发点的正确部分是什么。

接着，在彻底理解新方案的价值之后，你就可以比较客观地思考这么六个问题：

1. 新方案的实现成本有多少？
2. 新方案上线后带来的短期价值有多大？
3. 这个新方案是否可以全面替代现有方案？
4. 全面替代的实施成本有多少？
5. 全面替代之后，这个新方案带来的长期价值是什么？
6. 如果不能全面替代，而是两套方案并存，那么增量的维护成本有多大？

事实上，大多数人在看一个新方案时，只是思考了前两个问题，然后就匆忙做了判断。要知道，这完全不能让建议者看到他的方案对全局的影响。

通过这个案例我更想强调的是：关于架构目标的决策，对于一个人或一个团队的影响是巨大的。所以当你有了一个正确的关于架构目标的决策，要知道这只是一个起点。你还要认真思考这个决策的实施路径，让大家团结在正确的架构目标上，而不是你自己一个人举着架构目标，变成孤家寡人。

<mark>第三种情况：关于业务项目的目标</mark>

现在我们谈另外一种情况，业务目标太多或者是不明确，从而导致架构活动目标缺失的话，你该怎么办？

这里我们要引入两个概念：决策者和取舍权。决策权决定要什么，取舍权决定保留什么。一个决策者，必须要行使自己的取舍权，在自己的决策领域内做取舍。

在充分竞争环境下胜出的公司，几乎没有任何一个是通过大范围的搜索商业模式去寻找增长的。战术上的勤劳永远都没办法补救战略上的错误。这里面有非常多的经典商业案例：比如柯达、DEC、Sun Microsystems，都是非常典型的由于战略错误导致公司最终被淘汰的例子。

那么我们能做的是什么呢？至少有四件事情你可以做，注意，这是一个 Fail-over 的过程。

首先，想办法反馈这个情形，耐心解释给当初的决策者，请他来做取舍。这个本来应该是第一步也应该是唯一的一步。但是就像隔壁老王说的：“你永远也叫不醒装睡的人”。所以这个办法往往不管用。

其次，你自己做个取舍优先级，想办法通知到决策者。另外我想强调一下，通知是个非常有挑战的事情，我就见到过坚决不接受取舍的 CEO。但哪怕是这样的 CEO，他一般也会接受你给出的上线顺序。

如果上面的方法还是不管用怎么办？这个时候你可以尝试自己拿下取舍权。你需要清晰表达你取舍背后的思考逻辑，并邀请相关的利益方参与辩论。

最后，也是最常出现的情况，是你上述这些努力都失败了。这个时候，你可以通过技术手段来做延迟或者是隔离决策。这个办法对业务目标不明确的场景也同样适用。比如你可以采用类似设计模式中的策略模式，把一个或多个业务尝试隔离在策略实现中。每次业务尝试对主流程不产生影响，每个尝试逻辑都封装在单个策略中。

**思考题**

1、请你思考一下，你参与过的某个现在看起来不太合理的架构方案，你回想一下你当时有没有思考过那个方案是否“为企业创造生存优势”？如果你思考过了，是这个原则不适用于你的案例吗？如果你没有思考过，你可以试图用这个原则检验一下这个架构方案吗，你能得出和过去不一样的结论吗？如果你发现无法使用这个原则或者不影响你的结论，你可以跟大家分享一下为什么。

2、你做过的一个宏伟的为企业带来生存优势的技术项目吗？这个项目为什么会失败或成功了？这中间最核心的因素是什么？

3、你有没有成功劝阻过一个目标错误的架构活动呢？结果是什么呢？

# 04｜法则二：架构师为什么要学习马斯洛的需求理论？

今天我们来聊聊架构师的第二个生存法则：架构活动需要尊重和顺应人性。

在架构设计中如果能尊重和顺应人性，也就是人的基本感受和合理需求，那么我们也会拥有另一个解决问题的视角，辩证思考我们正在从事的架构工作。反过来，忽略人性可能给软件架构带来致命的失误。

提起人性，马斯洛需求层次模型是绕不过去的理论。

**如何理解马斯洛的理论？**

在上世纪 40 年代，马斯洛理论被认为是心理学上的一个巨大突破，原因在于就这个模型很好地概括了人性。一般的网络文章会把马斯洛的理论解释为需求层次模型，认为高层次需求建立在低层次需求之上，低层次需求的满足是高层次需求出现的前提。

而如果我们从源头来萃取马斯洛理论，去追本溯源的话，会发现这种表述不完全正确。

如果从源头来萃取马斯洛理论，可以得到什么样关于人性的理解呢？这里有两个重点，首先是动机有优先级。

- 不是需求有层次，而是动机有优先级

马斯洛认为，人类的动机以抢占顺序依次排列（Being arranged in a hierarchy of prepotency）。马斯洛用“prepotency”这个词，特指人类的动机是依次独占人类的全部意识的。也就是说，一旦一个动机进入了这个状态，那么这个动机会召唤人的全部意识、行为去满足这个动机。我们把这个动机称作主导动机（Prepotent motivation）。

举个例子来解释说明一下，比如马斯洛动机层次的最底层，也就是生理需求动机。当一个人在生理上长期处于饥饿状态，那么这个以饱腹为目的的动机，就是他的主导动机。我特别强调一下，这个饥饿与没吃早饭那种饥饿不同，这是一种由自然灾难带来的长期的食物匮乏，是一种因为饥饿而导致死亡的、严重缺乏食物的生理状态。

在这种情形下，你整个人，包括你的视觉、听觉、嗅觉，你的思考、记忆、行为等等，都只有一个目的，那就是满足你填饱肚子这个生理需求。而这个生理动机是你所有感官、意识、行为的组织者和决策者。这时候其他的动机都不重要，你甚至都不能感受到其他动机的存在。

只有这个动机背后的需求被满足了，而且是长期被满足了，那么由更高层次需求所诱发的动机才会被解锁。因而当这个新动机开始作用的时候，它又像之前的生理动机一样，抢占你所有的意识和行为，并且压制更高层次的动机，直到它背后的需求得到完全满足。

动机抢占意识的整个过程，如下图所示：

![image-20230602223506221](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202306022235318.png)

如上图所示，假设一个人同时存在 5 个需求，需求 1 和需求 2 已经被满足了，那么这两个需求就不会再诱发动机。而需求 3、4 和 5 没有被满足，它们会同时诱发各自的动机。但由于需求 4 和 5 诱发的动机被需求 3 所压制，因而最终是需求 3 诱发的动机，在组织和驱动这个人整体的意识和行为。

到这里你就会明白，马斯洛强调的不是需求有层次，而是动机有优先级。从某种程度上来说，诱发这些动机的需求也被传递了同样的优先级。所以把马斯洛理论翻译为需求层次理论，虽然不能说完全错误，但却没有完整传递马斯洛理论的核心观点，甚至是部分曲解了马斯洛的理论。

- 动机跃迁

接下来是第二个重点，那就是动机是跃迁的。

其实我们学计算机的应该很容易理解马斯洛的理论，它跟硬件中断的机制几乎完全相同。计算机的各种外围设备在并行着工作。当它们需要抢占 CPU 的时候，就会发出中断请求。而人类的各种需求，就相当于并行运作的外设。需求诱发的动机，就相当于对系统的中断请求。而动机就像中断请求一样，各自有自己的优先级。高优先级的中断请求，则会抢占低优先级的中断请求。

马斯洛认为，人的行为在单一时刻不是面向多目标做优化，而是面向单一目标做优化。一旦某个动机抢占了人的意识，那么它就抢占了这个人的全部意识，此时整个生命的所有思考、行为等，都在为满足这个动机而工作。那些帮不上忙的器官和能力，就被放置在后台运行了。可以说，在马斯洛模型下，主导我们人类整体意识和行为的工作机制是单线程的。

到这里，我们就可以把马斯洛理论的实质总结出来了：<mark>一般来说，人有且只有一个主导动机。这个动机由人的内在需求所驱动，并独占且主导这个人当前的一切意识和行为。直到这个动机背后的需求被完全满足之后，更高层次的动机才可能进入主导位置。</mark>

- 动机抢占

马斯洛认为心理安全感的获得主要来自于一个人的成长过程。一个人从出生起，父母会为孩子就会提供熟悉、常规和有结构的日常生活。这种安全感也在随后的成长中逐渐扩展到了相对可控的、已知的、可预测的，以及相对安全的生活和工作环境中。

一旦我们处在一个特殊处境下，比如面临战争、瘟疫等灾难，哪怕我们没有受到直接的威胁，那安全感也会丧失。在这个时候，我们生命体所有的意识和行为都在为寻找安全感这个动机而工作。

**马斯洛动机跃迁理论的核心描述和具体应用**

总结来说，马斯洛认为人的动机是内在的。这些动机来自人的不同心理需求，从最基本的生理上的需求，到心理安全感，再到群体认同感，然后是内在有底气的自尊，最后到最大化的自我实现。

如果这些需求没有被满足，它们就会刺激出人的动机，去满足这些需求。但这些动机并非同时生效，因为任何时候都只有一个主导动机在支配着我们整个人的感官、意识和行为。这些动机依次出现的顺序，如图所示：

![image-20230602224503789](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202306022245845.png)

当生理需求得不到满足，那么源于生理需求的动机 1 就会处于主导地位，并且会屏蔽其他动机。只有生理需求得到满足了，那么处于生理需求之下的、未满足的安全感，才能诱发以获取心理安全感为目标的动机，然后成为主导动机。以此类推。

我来给你分享个经典案例——儿童的 MRI 扫描问题的解决，来看看我们可以怎样通过顺应人性来解决一个具体的问题。

MRI 的扫描过程非常慢，通常会持续半个小时，而且还要求患者必须保持一动不动的姿势。对于儿童来说，这肯定很难做到，所以给儿童做扫描的前提就是先做全身麻醉，这就让本来一个相对安全的诊断设备变得非常危险。

后来 GE 的设计师 Doug Dietz 做了一个非常巧妙的设计，他把 MRI 机器改装成海盗船的模样，并告诉孩子说你要进海盗的船了，必须一动不动保持 30 分钟，直到我们救你出来。如果动弹，就会被海盗抓走。

结果呢？孩子们非常配合。就这样，在对 MRI 成像机制和扫描流程没有做任何技术更改的情况下，全麻率从之前的 80% 降低到了 10%。

这种从共情出发，深度理解和尊重用户的做法，就是设计思维的精髓所在。之所以能提出这个方案，主要在于我们拥有了另一种看待问题的视角：

到底是被动地迭代方案，执着于填补设计的漏洞；还是从共情用户的角度出发，脱离现有技术方案的束缚。同时忘记现有的技术方案的强大，把关注点放在深度理解用户、解决用户的痛点上，进而拓展技术设计空间，找到更完美的技术路径。

答案不言自明。

到这里，在架构活动中考虑和顺应人性的必要性和重要性，相信你已经很清楚了。那么接下来一个更为重要的问题就是：在软件架构活动中该如何顺应和考虑人性呢？

**思考题**

1、在马斯洛的理论中，自我实现是个内在的目标，是由个人决定的，但这个内在目标会影响整个社会的产出。假设社会存在某种有效的手段可以干预这个目标的话，你认为社会应该干预吗？举个例子，假设达芬奇不花那么多时间作画，他有可能成为一个更伟大的科学家。或者他不花那么多时间去研究科学，他有可能成为一个更伟大的艺术家。如果社会能干预达芬奇的选择，你认为社会应该干预吗？你介意被他人干预吗？

2、能否举一个在你身边发生的、违反了马斯洛理论例子？它为什么会发生呢？

3、大胆假设一下，在后人工智能时代，如果我们人类（被）进化成了机器与人的混合体，其中机器也有它的需求（比如没电了要充电），那么你能想象一下，这种混合体会有什么样的需求呢？我们该怎么设置这些需求的优先级呢？

# 05｜法则二：研发人员的人性需求是如何影响架构活动成败的？

上节课我们学习了马斯洛关于人性的理论，那么这节课我们就利用这个理论来看看我们在架构活动中应该注意些什么。

架构设计必须符合人性，而在架构活动中，与“人”相关的主要就是研发人员和目标用户。那么今天这节课我们就先从研发人员讲起。

想想看，如果架构设计忽略或剥夺了研发人员的人性，会怎样呢？再一个，如果架构活动中尊重和顺应了人性，那么又能给我们架构师一个怎样不同的解决问题的视野呢？这正是我们接下来要讨论的内容。

**研发人员为什么需要安全感？**

研发人员的生理需求是能够在软件架构考虑范围之外得到充分满足的，那么根据马斯洛的理论，如果一个研发团队，本来是具备心理安全感的，但是突然间却被剥夺了，这会导致什么问题呢？

**没有人性的技术架构，就没有生存空间**



![image-20230604225134708](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202306042251812.png)

为什么会造成如此惨重的结果呢？

因为这个架构设计完全忽略了人性。具体来说，就是这个架构方案完全忽视了小公司里研发团队的心理安全感需求。

其实我一直认为做微服务就像农民耕耘自己的土地一样。无论是古罗马，还是中国封建社会的历朝历代，再或是美国，开国之初都有过开荒屯田的政策，每个农民都可以分到一块属于自己的土地，国家也因此得到了飞速的发展。

对于我们今天这些进城的互联网民工来说，微服务就是咱们的土地。有了自己的地，我们肯定会拼命劳作，想办法从土地里找到致富的希望，不是吗？ 但是如果大家都在一个大锅盛饭吃，而且总是僧多粥少，曾经挨过饿的互联网民工们能不担心吗？

# 06｜法则二：拼多多是如何通过洞察用户人性而脱颖而出的？

我们都知道，软件这个虚拟的存在最终是要服务于用户的，所以在软件设计的过程中也要考虑用户的人性。也就是说，一个架构师要站在用户的角度去思考架构的规划和设计。

**从人性看拼多多是怎么赶超阿里的**

这里面有很多因素，比如说线上支付、微信流量。但其中至少有一个关键因素和马斯洛的人性理论有关：拼多多对用户人性的理解，远远超越了其他同时期的电商玩家。

拼多多创始人黄峥在《财经》杂志的采访中说了这个洞察：“我们的核心不是便宜，而是满足用户占便宜的感觉”。

我再重复一下第四节课讲的马斯洛关于主导动机的描述：一旦一个动机进入了这个状态，那么这个动机会召唤一个人的全部能力去满足这个动机。这时候这个动机就是主导动机。

那么在拼多多这个例子中，占便宜的心智就会诱发具备抢占性的主导动机。

**从用户心智到增长飞轮**

那么你作为一个架构师，理解这个人性有什么意义呢？

从我的观察来看，很多创业公司，从初创到倒闭，都没搞清楚自己的目标人群和心智。如果一个公司，能锁定目标人群及其心智，那么对于软件架构师而言，你就有了一个确切的技术问题和研究方向。这可能是一个架构师最梦寐以求的工作处境。

我们先来看下面这张图：

![image-20230605215316038](https://technotes.oss-cn-shenzhen.aliyuncs.com/2023/202306052153156.png)

图中的每条连线上都有一个角标“+”号，如果前项的增长会带来后项增长，那么箭头上也用“+”号表示。你会看到整张图上都只有“+”号，这就代表整个平台机制形成了正循环。也就是说，随着时间的推移，价值在不断放大。这是系统论的正反馈循环，也就是大家经常提到的飞轮效应。

一个架构师，如果你能尽早看懂看透你公司的用户心智，那么你就可以在技术上提前布局，从用户思维出发，扩大你的技术搜索空间，最终为公司创造更大的价值。

**思考题**

1、设计思维其实无处不在，我认为 Hive 其实也是一个设计思维的好案例，你能理解我为什么这么认为吗？除了 Hive，你能举出其他可以体现设计思维的好例子吗？

2、到这节课为止，我们已经完成了对马斯洛人性理论的学习。你能够举出你身边或者是观察到的一些好例子吗？通过这三节课的学习，你有没有什么新的启发？

3、你有没有发现你与身边某些人存在一些明显的认知差距？你是用什么手段缩短这个差距的呢？

# 07｜法则三：架构师如何找到自己的商业模式？

今天我们要讲的是架构师的第三个生存法则：作为一个架构师，必须要在有限的资源下最大化架构活动所带来的商业价值。对于任何一个架构活动而言，架构师的可用资源，包括商业成本、研发成本、时间成本、迁移成本等等，都是非常有限的。但架构活动就是要在这些限制条件之下，将商业价值最大化。

**什么是商业价值？**

商业价值 (Business value) 呢，就是从现金收入的视角看价值创造的过程。你每天忙碌的工作，从企业的收入上来说，可以为公司带来什么样的短期和长期现金和其他收入，那么对这部分收入的量化，就是你创造的商业价值。简单来说，商业价值就是帮助公司获取商业收入。

我会把第三条生存法则分为五个部分来讲：

1. 理解你所在的企业或团队的商业模式；
2. 理解你在自己所处环境中创造的商业价值；
3. 保障架构活动的长期商业价值；
3.  在架构规划中寻找扩大收入的机会；
3. 在架构规划中寻找减少成本的机会。

**理解一个企业或团队的商业模式**

比如说天猫这个电商平台，它的主要收入来自于交易抽成：

```
总收入 = GMV * Commission
```

网站的交易额越大，抽成就越多。网站规模越大，总收入就越多。

但到了不同的细分领域，每个领域的商业模式，就会分解成不一样公式了。比如说你负责天猫平台的一个由算法驱动的购物频道，那么你们的商业模式可能是这样的：

```
GMV= 流量 * 转化率 * 平均订单金额
```

如果你负责天猫平台某个垂直行业的招商团队，那么你们的商业模式可能是这样：

```
GMV= 日均动销店铺数 * 店铺日均销售额
```

如果你负责某个垂直行业的大商户运营团队，那么你们的商业模式可能是这样：

```
GMV= 活动参与次数 * 平均计划销售额 * 计划达成率
```

如果你负责商品团队，那么你们的商业模式可能是这样的：

```
GMV= 动销商品数 * 订单数 * 每订单件数 * 件单价
```

**理解自己所处的工作环境**

一个以客户为导向的团队，他们的首要目的不是听从上司的声音，而是去倾听客户的声音，从客户的需求中寻找自己能够创造商业价值的地方。所以这样的团队，绝不会靠公司的拨款过日子，他们的收入必须源自为客户创造的真实的商业价值。

这就是为什么越是受公司大力赞助的项目就越难存活的道理。

如果你活在一个靠公司拨款而生存的部门，那么你学习到的能力是有限的，因为你们部门从上到下都不是在求生，也不是为客户创造价值，所以你也学不到真正的生存技能。

==我们每个人都要有自己的商业模式。==你必须在工作环境中找到创造价值的方式，这样才能保障自己一直被需要，也能保障未来的收入。

这里面有两个关键元素。第一是增量价值，就是你通过工作所创造的价值，是在社会提供的平均价值之上的。

举个例子。2010 年之前，如果你是一个做微服务框架的高手，那你的增量价值就非常大，一个人能顶十个甚至一百个研发。因为那时候开源的微服务框架还不够成熟。但到了今天，如果你还是单兵作战，擅长写微服务框架，那跟开源的 Spring Framework 相比，你提供的增量价值可能就是一个负数了。因为团队剩下的同学还要花时间来学习、使用和维护你写的框架，公司也要为这些同学付出工资成本。

虽然你的工作没有变，但社会提供的开源解决方案的价值增加了，那你的增量价值相应地就会减少，甚至不存在。

第二个是可度量性。把自己的工作放到我们刚才讲的公式里去。假设你是做商品相关的技术，那么：

```
GMV= 动销商品数 * 订单数 * 每订单件数 * 件单价
```

你需要度量的是，你的工作对公式中的某一项或某几项会起到什么促进作用。

# 08｜法则三：架构师如何在一定时间内最大化自己的增量价值？

作为架构师，该如何为你的公司、部门或团队提供可量化的增量价值呢？主要有扩大收入与减少成本两种路径。今天这节课，我们就结合几个真实的案例来具体分析一下。

**如何寻找扩大收入的机会？**

你可能听说过“在小数据里看大机会，在大数据里看小机会”这句话，这其实适用于我们所有技术人。

前半句指的是从个性需求中抽象出共性的机会。也就是从解决一个具体问题的过程中得到启发，并从中找到一个可以规模化应用的机会。比如做用户调研时，你发现有一个用户总是截图之后再通过微信把商品发给另一个人。那么你就会意识到，可以开发一个分享工具，通过小程序和 DeepLink 来获得更多的社交裂变。

后半句指的是靠数据来打磨用户体验。也就是通过数据分析找到机会点，然后通过产品和技术的改进，不断提升转化减少损失。这是算法和数字化运营的常见办法。比如淘宝 App 的首页跳出率是 2%，就是通过数据分析和打磨而不断提升的。

我特别强调一下前半句。事实上，很多著名的开源框架都是这么来的。离我们最近的一个例子就是 Docker。

虽然现在的 Docker 已经没有它如日中天时那么辉煌了，但毫不夸张地说，今天整个云原生生态的存在，引爆点就是 Docker。但谁能想到，Docker 最初只是为了解决一个环境打包问题呢！回想一下，从你进入计算机领域以来，你见过几个程序员会把心思放在运行环境打包上呢？

这个案例给我的启发就是，很多非常成功的技术人，他们往往就是看到了别人忽略的小痛点，或者在别人不去排查的小异常上执着探索，才最终跨越了现实的障碍。

**如何寻找减少成本的机会？**

一个公司在做商业模式探索的过程中，跟一个人要向前冲刺是一样的，都需要消耗能量。只不过对于一个公司而言，这个能量是钱。一旦钱耗尽，公司就饿死了。

所以作为一线的架构师，哪怕你不清楚公司的财务状况，但你的任何架构动作，都要考虑公司的研发成本，确保团队的规模在公司财务状况的允许限度之内。这也是经济学中所说的成本观念。

其实这种成本观念公司上下每个人都要有。对于一个公司而言，一切有限资源上的消耗都是公司在架构活动中要付出的成本，比如时间成本、人力成本、机会成本、计算成本等。

分享一个我的经历。08 年美国发生次贷危机之前，我从耶鲁大学招了一个满分毕业的计算机系硕士生。他工作勤奋，产出也很好。但没过多久，公司就因为营收压力要强制裁员。由于他的入职时间最短，最终决定只能裁他。

他出生在印度一个普通家庭，从印度理工计算机系毕业后，又考到全球顶尖学府，这一路的艰辛可想而知。然而现实就是，在美国全职工作是拿绿卡留在美国的前提，我们一旦终止合同，那他只有几天时间去找工作。在经济危机发生的时候，这几乎是完全不可能的事情。

那两天公司上下都在裁员，当我叫他进办公室时，他已经预感到要发生什么，整个人都快虚脱了。他苦苦哀求，我都不知道该怎么回复他，只能沉默以对。这么多年了，我现在一闭上眼，还能想起他那一刻流露出的绝望眼神。

我分享这个故事，就是期望你知道，控制成本不是为了老板，而是为了我们自己。假设你总是以又大又笨重的系统去应对，那么在公司出现困境、经济出现低谷的时候，你的团队或企业可能就不复存在。相应地，架构师创造的软件也就不复存在，个人收入也会受影响。

从更理想化的角度来说，这么做也是为了自己的良心。我虽然无法预测未来，但在面对印度同事那一刻，内心还是非常自责。既然我不能给他一个稳定的任职机会，为什么还要让他加入？我的团队如果大幅盈利，那我不但不用裁员，说不定还可以收留其他员工。说到底还是我没做好。

最后那个被裁的印度同事怎么样了。当他走出我的办公室后，我整个人都要崩溃了。我在我们整个楼跑上跑下，挨个敲每个研发管理者的门，告诉他们这个同事有多优秀，裁员对他来说打击会有多大。我跑了一下午，没有得到任何回复，原本都绝望了。

但是下班前有个主管来找我，说他团队里有个同事知道来龙去脉后，决定在那天下午提前退休，把自己的位置让给印度同事。这位印度同事后来在这个团队工作了很多年，我们也一直保持着友好的朋友关系。

这个世界还是有很多善良的人的，我期望你能记住这个故事，善待你周围的人。

**思考题**

能否分享一个你经历过的通过技术创造商业价值的案例呢？请注意，在分享这个案例的过程中，我建议你多强调这个技术突破点是怎么被发现的，具体的技术细节反倒可以讲得概括一些。







